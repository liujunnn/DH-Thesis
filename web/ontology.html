<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Chinese Porcelain in Europe: Interactive Knowledge Map Ontology">
    <meta name="keywords" content="Chinese porcelain, Europe, ontology, knowledge map, digital cultural heritage, interactive">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Interactive Knowledge Map Ontology - Chinese Porcelain in Europe</title>

    <!-- External Resources -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Raleway:wght@300;400;500;600&display=swap" rel="stylesheet">

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        background: '#f0f7ff',
                        lightBlue: '#e6f0ff',
                        primaryBlue: '#1A3263',
                        secondaryBlue: '#2c5282',
                        accentBlue: '#3b82f6',
                        darkBlue: '#0c2040',
                        cardBg: '#ffffff',
                        highlight: '#7fbfff',
                        porcelain: {
                            blue: '#4A6FA5',     // 低饱和度瓷蓝色
                            cyan: '#82B3A8',    // 低饱和度瓷青色
                            yellow: '#D4B676',  // 低饱和度瓷黄色
                            red: '#A65959',     // 低饱和度瓷红色
                            green: '#6D8B74',   // 低饱和度瓷绿色
                            purple: '#947EA8',  // 低饱和度瓷紫色
                            orange: '#D28A67',  // 低饱和度瓷橙色
                            pink: '#C892A1',    // 低饱和度瓷粉色
                            brown: '#A68C78',   // 低饱和度瓷棕色
                            beige: '#E8E4D6',   // 低饱和度瓷米色
                            lightCyan: 'rgba(55, 220, 214, 0.7)' // 浅青色
                        }
                    },
                    fontFamily: {
                        display: ['Playfair Display', 'serif'],
                        body: ['Raleway', 'sans-serif'],
                    },
                    boxShadow: {
                        card: '0 4px 12px rgba(26, 50, 99, 0.1)',
                        cardHover: '0 6px 18px rgba(26, 50, 99, 0.15)',
                        "expand": "8px 12px 24px rgba(26, 50, 99, 0.15)",
                    }
                }
            }
        }
    </script>

    <!-- Custom Styles -->
    <style type="text/tailwindcss">
        @layer utilities {
            .dashboard-title {
                @apply text-[clamp(1.5rem,3vw,2.5rem)] font-display font-bold text-primaryBlue mb-4;
            }
            .dashboard-subtitle {
                @apply text-lg text-secondaryBlue mb-8 max-w-2xl;
            }
            .metric-card {
                @apply bg-cardBg rounded-xl shadow-card p-6 transition-all duration-300 hover:shadow-cardHover flex flex-col items-center text-center;
            }
            .metric-value {
                @apply text-3xl font-bold text-primaryBlue mb-2;
            }
            .metric-label {
                @apply text-secondaryBlue font-medium;
            }
            .process-step {
                @apply bg-cardBg rounded-xl shadow-card p-3 mb-3 transition-all duration-300 hover:shadow-cardHover flex items-start;
            }
            .step-number {
                @apply w-8 h-8 rounded-full bg-accentBlue text-white flex items-center justify-center font-bold mr-3 flex-shrink-0 text-xs;
            }
            .step-content {
                @apply flex-1;
            }
            .step-title {
                @apply font-bold text-primaryBlue mb-1 text-sm;
            }
            .step-desc {
                @apply text-xs text-secondaryBlue;
            }
            .shape-card {
                @apply bg-cardBg rounded-xl shadow-card p-3 transition-all duration-300 hover:shadow-cardHover;
            }
            .shape-image {
                @apply w-full rounded-lg overflow-hidden mb-2;
                aspect-ratio: 1/1;
            }
            .shape-image img {
                @apply w-full h-full object-contain transition-transform duration-300;
            }
            .shape-card:hover .shape-image img {
                transform: scale(1.05);
            }
            .color-pill {
                @apply inline-block w-5 h-5 rounded-full mr-2;
            }
            .dashboard-grid {
                @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5;
            }
            .header-height {
                @apply h-32 md:h-40 flex items-center justify-center;
            }
            .wave-divider {
                height: 30px;
                overflow: hidden;
            }
            .wave-divider svg {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 30px;
            }
            .masterpiece-container {
                @apply rounded-xl shadow-expand overflow-hidden transition-all duration-500 hover:shadow-expand relative z-10 bg-white;
                transform: translate(0, 0);
                transition: transform 0.5s ease, box-shadow 0.5s ease;
            }
            .masterpiece-container:hover {
                transform: translate(8px, 8px);
            }
            .color-palette {
                @apply grid grid-cols-5 gap-3;
            }
            .masterpiece-img {
                height: 380px;
                overflow: hidden;
            }
            @media (min-width: 768px) {
                .masterpiece-img {
                    height: 500px;
                }
            }
            .masterpiece-image-container {
                @apply w-full h-full relative;
            }
            .masterpiece-image {
                @apply w-full h-full object-contain transition-transform duration-500 ease-in-out;
            }
            .zoom-controls {
                @apply absolute bottom-4 right-4 flex space-x-2 opacity-0 transition-opacity duration-300;
            }
            .masterpiece-container:hover .zoom-controls {
                @apply opacity-100;
            }
            .zoom-button {
                @apply w-9 h-9 rounded-full bg-primaryBlue/80 text-white flex items-center justify-center hover:bg-primaryBlue transition-colors duration-300 text-xs;
            }
            .modal {
                @apply fixed inset-0 bg-black/80 z-50 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300;
            }
            .modal.active {
                @apply opacity-100 pointer-events-auto;
            }
            .modal-content {
                @apply max-w-5xl w-full max-h-[90vh] relative;
            }
            .modal-image {
                @apply max-w-full max-h-[80vh] object-contain;
            }
            .close-modal {
                @apply absolute top-4 right-4 w-10 h-10 rounded-full bg-white/90 text-primaryBlue flex items-center justify-center hover:bg-white transition-colors duration-300 z-10;
            }

            /* Ontology specific styles */
            .chart-container {
                @apply rounded-xl shadow-card overflow-hidden bg-cardBg p-4 mb-6 transition-all duration-300 hover:shadow-cardHover;
            }
            .map-container {
                @apply rounded-xl shadow-card overflow-hidden h-[350px] mb-6 transition-all duration-300 hover:shadow-cardHover;
            }
            .section-title {
                @apply mb-12 text-center;
            }
            .section-title span {
                @apply text-accentBlue font-bold text-sm uppercase tracking-wider;
            }
            .section-title h2 {
                @apply text-[clamp(1.8rem,4vw,2.8rem)] font-bold mt-2 text-primaryBlue font-display;
            }
            .visualization-text {
                @apply p-6 bg-cardBg rounded-xl shadow-card transition-all duration-300 hover:shadow-cardHover;
            }
            .visualization-text h3 {
                @apply text-xl font-bold mb-3 text-primaryBlue;
            }
            .visualization-text p {
                @apply text-secondaryBlue;
            }
            .tooltip-custom {
                @apply absolute invisible bg-primaryBlue text-white text-sm px-3 py-2 rounded shadow-lg z-50 pointer-events-none max-w-xs;
            }
            .header {
                @apply bg-white shadow-sm sticky top-0 z-50;
            }
            .nav-link {
                @apply text-secondaryBlue hover:text-accentBlue transition-colors font-medium;
            }
            .nav-link.active {
                @apply text-primaryBlue font-semibold;
            }
            .mobile-menu-btn {
                @apply md:hidden text-secondaryBlue focus:outline-none;
            }
            .mobile-menu {
                @apply md:hidden hidden bg-white border-t;
            }
            .blue-gradient {
                background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%);
            }
            .blue-pattern {
                background: linear-gradient(135deg, #e6f0ff 0%, #d1e4ff 100%);
            }

            /* Ontology container */
            .ontology-container {
                @apply flex flex-col lg:flex-row gap-6 mb-8;
            }
            .class-hierarchy {
                @apply bg-cardBg rounded-xl shadow-card p-6 overflow-auto;
                max-height: 800px;
            }
            .class-hierarchy h3 {
                @apply font-display font-bold text-primaryBlue mb-4 pb-3 border-b border-lightBlue;
            }
            .class-list {
                @apply font-body;
            }
            .class-list ul {
                @apply list-none pl-0;
            }
            .class-list li {
                @apply cursor-pointer p-3 my-2 rounded-lg transition-all duration-300;
                background-color: #f0f7ff;
                border-left: 4px solid #4facfe;
            }
            .class-list li:hover {
                background-color: #e0f0ff;
                transform: translateX(5px);
            }
            .class-list li i {
                @apply text-accentBlue mr-2;
            }
            .ontology-visualization {
                @apply bg-cardBg rounded-xl shadow-card p-6 flex flex-col;
            }
            .map-controls {
                @apply flex flex-wrap justify-between items-start mt-4 pt-4 border-t border-lightBlue;
            }
            .legend {
                @apply flex flex-wrap gap-4 mb-4;
            }
            .legend-item {
                @apply flex items-center gap-2 text-sm;
            }
            .legend-color {
                @apply w-4 h-4 rounded-full;
            }
            .instructions {
                @apply text-secondaryBlue italic text-sm max-w-xs;
            }
            .layer-controls {
                @apply w-full mt-4 pt-4 border-t border-lightBlue;
            }
            .layer-control-title {
                @apply mb-3 text-primaryBlue font-bold flex items-center;
            }
            .layer-buttons {
                @apply flex flex-wrap gap-2 mb-4;
            }
            .layer-btn {
                @apply px-4 py-2 bg-lightBlue border border-lightBlue rounded-lg cursor-pointer text-sm transition-all duration-300;
            }
            .layer-btn:hover {
                @apply bg-accentBlue/20;
            }
            .layer-btn.active {
                @apply bg-accentBlue text-white border-accentBlue;
            }
            .export-controls {
                @apply flex flex-wrap gap-2;
            }
            .export-btn {
                @apply px-4 py-2 bg-primaryBlue text-white border-none rounded-lg cursor-pointer text-sm transition-all duration-300;
            }
            .export-btn:hover {
                @apply bg-secondaryBlue;
            }
            .reset-view {
                @apply px-4 py-2 bg-secondaryBlue text-white border-none rounded-lg cursor-pointer text-sm transition-all duration-300 mt-3;
            }
            .reset-view:hover {
                @apply bg-primaryBlue;
            }

            /* Artifact styles */
            .artifact-container {
                @apply bg-cardBg rounded-xl shadow-expand overflow-hidden mb-10 transition-all duration-300 hover:shadow-cardHover flex flex-col lg:flex-row;
            }
            .artifact-image {
                @apply p-8 flex items-center justify-center lg:w-1/2;
            }
            .artifact-image.left {
                @apply order-2 lg:order-1;
            }
            .artifact-image.right {
                @apply order-1 lg:order-2;
            }
            .artifact-image img {
                @apply max-w-full max-h-96 rounded-lg shadow-card;
            }
            .artifact-details {
                @apply p-6 lg:w-1/2;
            }
            .artifact-details h3 {
                @apply text-2xl font-display font-bold text-primaryBlue mb-6 pb-4 border-b border-lightBlue;
            }
            .metadata-section {
                @apply mb-6;
            }
            .metadata-section h4 {
                @apply font-bold text-accentBlue mb-3 flex items-center;
            }
            .metadata-section ul {
                @apply list-none pl-0;
            }
            .metadata-section li {
                @apply py-2 border-b border-lightBlue/30 flex;
            }
            .metadata-section li strong {
                @apply min-w-[180px] text-primaryBlue;
            }
            .btn {
                @apply inline-block bg-accentBlue text-white px-6 py-3 rounded-full no-underline font-semibold transition-all duration-300 hover:bg-primaryBlue shadow-card;
            }
            .tooltip {
                @apply absolute bg-primaryBlue text-white p-3 rounded-lg pointer-events-none text-sm max-w-xs z-50;
            }
        }
    </style>
</head>
<body class="font-body bg-background text-primaryBlue min-h-screen">
    <!-- Navigation Bar -->
    <header class="header">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="./index.html" class="text-xl font-bold text-primaryBlue flex items-center space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="w-8 h-8">
                    <circle cx="50" cy="50" r="45" fill="#1A3263" opacity="0.1" />
                    <path d="M30,30 L70,30 L70,70 L30,70 Z" fill="none" stroke="#1A3263" stroke-width="2" />
                    <circle cx="50" cy="50" r="10" fill="#7BAEA0" />
                    <path d="M40,40 Q50,25 60,40 T50,65 T40,40" fill="#3b82f6" />
                </svg>
                <span class="font-display">ChinaPorcelain</span>
            </a>

            <nav class="hidden md:flex items-center space-x-4">
                <a href="./index.html" class="nav-link text-sm">Home</a>
                <a href="./research.html" class="nav-link text-sm">Research</a>
                <a href="./ontology.html" class="nav-link text-sm active">Ontology</a>
                <a href="./visualization.html" class="nav-link text-sm">Visualization</a>
                <a href="./aboutus.html" class="nav-link text-sm">About</a>
            </nav>

            <button id="mobile-menu-button" class="mobile-menu-btn text-sm">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="py-6 md:py-8 blue-pattern header-height relative">
        <div class="container mx-auto px-4 text-center">
            <h1 class="dashboard-title">Chinese Porcelain Ontology Explorer</h1>
            <p class="dashboard-subtitle mx-auto">Interactive knowledge map showcasing Chinese porcelain artifacts in European collections</p>
        </div>
        <div class="wave-divider absolute w-full bottom-0">
            <svg viewBox="0 0 1200 60" preserveAspectRatio="none">
                <path d="M0,0V23.15c23.89,11.23,51.79,16.29,79.48,15.24,31.72-1.32,62.59-10.89,88.26-25.83,33.2-17.09,60.67-39.7,89.65-49.14,39.35-12.02,80.06,7.34,114.43,27.57,31.25,17.86,60.09,39.4,89.67,49.64,31.77,10.7,67.61-3.05,95.64-26.73,28.23-23.9,58.09-49.84,85.1-68.79,29.23-20.08,60.62-27.34,94.96-24.33,33.2,2.85,61.75,20.97,86,38.84,30.7,18.23,59,39.27,87.09,49.24,28.47,10.2,62.32-2.85,88.63-28.54,27.24-25.86,48.33-59,65.1-86.3,15.25-25.69,37-48.9,58.6-68.79,22.23-20.21,48.89-38.3,75.21-49.48V0Z" opacity=".25" fill="#1A3263"></path>
                <path d="M0,0V10.93c18.79,5.36,37.39,7.19,56.69,3.21,29.23-5.38,57-19.71,84.73-29.14,32.83-10,67.53-6.09,96.67,7.6,32.76,14.23,58,35.4,85.1,49.64,29.23,15.23,60.09,28.48,89.67,39.4,31.77,10.7,67.61-3.05,95.64-26.73,28.23-23.9,58.09-49.84,85.1-68.79,29.23-20.08,60.62-27.34,94.96-24.33,33.2,2.85,61.75,20.97,86,38.84,30.7,18.23,59,39.27,87.09,49.24,28.47,10.2,62.32-2.85,88.63-28.54,27.24-25.86,48.33-59,65.1-86.3,15.25-25.69,37-48.9,58.6-68.79,22.23-20.21,48.89-38.3,75.21-49.48V0Z" opacity=".5" fill="#1A3263"></path>
                <path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z" fill="#1A3263"></path>
            </svg>
        </div>
    </section>

    <!-- Ontology Section -->
    <section id="ontology" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="section-title">
                <span>ONTOLOGY STRUCTURE</span>
                <h2>Chinese Porcelain in Europe Knowledge Map</h2>
            </div>

            <div class="ontology-container">
                <div class="class-hierarchy">
                    <h3><i class="fas fa-sitemap mr-2 text-accentBlue"></i> Class Hierarchy</h3>
                    <div class="class-list" id="classList">
                        <!-- Class hierarchy will be generated here -->
                    </div>
                </div>

                <div class="ontology-visualization">
                    <h3><i class="fas fa-project-diagram mr-2 text-accentBlue"></i> Interactive Knowledge Map</h3>
                    <div id="knowledgeMap"></div>

                    <div class="map-controls">
                        <div class="legend">
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #1a3a5f;"></div>
                                <span>Root Classes (Level 1)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #2a9d8f;"></div>
                                <span>Primary Categories (Level 2)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #e9c46a;"></div>
                                <span>Sub-Categories (Level 3)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #e76f51;"></div>
                                <span>Leaf Classes (Level 4+)</span>
                            </div>
                        </div>

                        <div class="instructions">
                            <i class="fas fa-info-circle mr-1 text-accentBlue"></i> Use mouse wheel to zoom, drag to pan, click nodes to highlight
                        </div>

                        <!-- Layer controls -->
                        <div class="layer-controls">
                            <div class="layer-control-title">
                                <i class="fas fa-layer-group mr-2 text-accentBlue"></i>Display Options:
                            </div>
                            <div class="layer-buttons">
                                <button class="layer-btn active" data-max-level="2">Levels 1-2</button>
                                <button class="layer-btn" data-max-level="3" data-zoned="false">Levels 1-3</button>
                                <button class="layer-btn" data-max-level="3" data-zoned="true">Level 3 Zones</button>
                                <button class="layer-btn" data-max-level="4">All Levels</button>
                            </div>
                            <div class="export-controls">
                                <button id="exportSVG" class="export-btn">
                                    <i class="fas fa-download mr-1"></i>Export SVG
                                </button>
                                <button id="exportPNG" class="export-btn">
                                    <i class="fas fa-camera mr-1"></i>Export PNG
                                </button>
                            </div>
                        </div>
                    </div>

                    <button class="reset-view" id="resetView">
                        <i class="fas fa-sync-alt mr-1"></i> Reset View
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Artifact Section -->
    <section id="featured-artifact" class="py-16 bg-background">
        <div class="container mx-auto px-4">
            <div class="section-title">
                <span>ONTOLOGY IN ACTION</span>
                <h2>Featured Artifacts: Structured Information</h2>
            </div>

            <!-- First Artifact - Left Image (在大屏幕上显示在右侧) -->
            <div class="artifact-container">
                <div class="artifact-image left">
                    <img id="artifactImage1" src="./FigureA.jpg" alt="Covered jar with women on a terrace and shishi finial">
                </div>

                <div class="artifact-details">
                    <h3>Covered Jar with Women on a Terrace and Shishi Finial</h3>

                    <div class="metadata-section">
                        <h4><i class="fas fa-venus mr-2 text-porcelain-pink"></i> Chinese_Ladies_Porcelain_in_Europe</h4>
                        <p>This artifact is an example of Chinese porcelain featuring depictions of women, popular in Europe during the Qing dynasty.</p>
                    </div>

                    <div class="metadata-section">
                        <h4><i class="fas fa-tags mr-2 text-porcelain-green"></i> DescriptiveMetadata</h4>
                        <ul>
                            <li><strong>ColoredDrawing:</strong> Underglaze blue with overglaze red, black, and gold</li>
                            <li><strong>Decorations:</strong> Two scenes with women in gardens, one with a rabbit and a fan, another with musical instruments</li>
                            <li><strong>Descriptions:</strong> Drum-shaped covered jar with monster head handles</li>
                            <li><strong>Function:</strong> Decorative and storage</li>
                            <li><strong>Glaze:</strong> Blue and white porcelain with additional colors</li>
                            <li><strong>ProductionPlace:</strong> China, Jingdezhen kilns</li>
                            <li><strong>Shape:</strong> Drum-shaped with a lid and a shishi (lion-dog) finial</li>
                        </ul>
                    </div>

                    <div class="metadata-section">
                        <h4><i class="fas fa-expand mr-2 text-porcelain-purple"></i> ExtendedMetadata</h4>
                        <ul>
                            <li><strong>Documentation:</strong> "Chinese ceramics in the collection of the Rijksmuseum, Amsterdam: the Ming and Qing dynasties, p. 110, cat.nr. 106"</li>
                            <li><strong>RelatedCollections:</strong> Dekselpot met vrouwen op een terras en dekselknop in de vorm van een shishi</li>
                            <li><strong>RelatedEvents:</strong> Exhibition at Rijksmuseum (2018-2019)</li>
                        </ul>
                    </div>

                    <div class="metadata-section">
                        <h4><i class="fas fa-database mr-2 text-porcelain-blue"></i> Metadata_for_Management</h4>
                        <ul>
                            <li><strong>Identifier:</strong> AK-RBK-14943-B</li>
                            <li><strong>Measurements:</strong> Height: 24 cm, Diameter: 18 cm, Weight: 1.2 kg</li>
                            <li><strong>Period:</strong> Qing-dynasty (1644-1912) / Kangxi-period (1662-1722)</li>
                            <li><strong>Preservation:</strong> Excellent condition; Current Location: Rijksmuseum, Amsterdam</li>
                            <li><strong>ProvidingInstitution:</strong> Netherlands, Rijksmuseum Amsterdam</li>
                            <li><strong>Source:</strong> Acquired in 1937 through the estate of Jonkheer J.P. Six van Vromade</li>
                            <li><strong>Title:</strong> Covered jar with women on a terrace and finial in the shape of a shishi</li>
                        </ul>
                    </div>

                    <a href="#" class="btn">View Full Artifact Record</a>
                </div>
            </div>

            <!-- Second Artifact - Right Image (在大屏幕上显示在左侧) -->
            <div class="artifact-container">
                <div class="artifact-image right">
                    <img id="artifactImage2" src="./FigureB.jpg" alt="Beaker vase with Chinese ladies and flower sprays">
                </div>

                <div class="artifact-details">
                    <h3>Beaker Vase with Chinese Ladies and Flower Sprays</h3>

                    <div class="metadata-section">
                        <h4><i class="fas fa-venus mr-2 text-porcelain-pink"></i> Chinese_Ladies_Porcelain_in_Europe</h4>
                        <p>Trumpet-shaped beaker vase exemplifying 18th-century Chinese export porcelain, featuring alternating panels of Chinese ladies and flower pots in a blue-and-white decorative scheme.</p>
                    </div>

                    <div class="metadata-section">
                        <h4><i class="fas fa-tags mr-2 text-porcelain-green"></i> DescriptiveMetadata</h4>
                        <ul>
                            <li><strong>ColoredDrawing:</strong> Underglaze blue decoration on white porcelain</li>
                            <li><strong>Decorations:</strong> Four rows of hexagonal panels with Chinese ladies (long robes) and flower pots on low tables in leaf-shaped frames; flower branches above</li>
                            <li><strong>Descriptions:</strong> Trumpet-shaped body with thickened middle section, spiral work bands above and below</li>
                            <li><strong>Function:</strong> Decorative vase (potential use for flower arrangement)</li>
                            <li><strong>Glaze:</strong> Transparent glaze over underglaze blue decoration</li>
                            <li><strong>ProductionPlace:</strong> China (likely Jingdezhen kilns)</li>
                            <li><strong>Shape:</strong> Trumpet-shaped with flared rim and cylindrical body</li>
                        </ul>
                    </div>

                    <div class="metadata-section">
                        <h4><i class="fas fa-expand mr-2 text-porcelain-purple"></i> ExtendedMetadata</h4>
                        <ul>
                            <li><strong>Documentation:</strong> Part of the Rijksmuseum's collection documentation (AK-RBK-16290_E)</li>
                            <li><strong>RelatedCollections:</strong> Similar pieces in the British Museum (C.123-1910) and Louvre</li>
                            <li><strong>RelatedEvents:</strong> Featured in "China to Europe: The Porcelain Journey" exhibition (2021)</li>
                        </ul>
                    </div>

                    <div class="metadata-section">
                        <h4><i class="fas fa-database mr-2 text-porcelain-blue"></i> Metadata_for_Management</h4>
                        <ul>
                            <li><strong>Identifier:</strong> AK-RBK-16290_E</li>
                            <li><strong>Measurements:</strong> Height: 22.5 cm, Diameter: 18 cm</li>
                            <li><strong>Period:</strong> Qing dynasty, Kangxi period (1662-1722)</li>
                            <li><strong>Preservation:</strong> Excellent condition; minor wear on inner rim</li>
                            <li><strong>ProvidingInstitution:</strong> Netherlands, Rijksmuseum Amsterdam</li>
                            <li><strong>Source:</strong> Acquired through the estate of J.P. Six van Vromade (1937)</li>
                            <li><strong>Title:</strong> Beakervase with Chinese ladies and flower pots in panels</li>
                        </ul>
                    </div>

                    <a href="#" class="btn">View Full Record on Europeana</a>
                </div>
            </div>

            <!-- Third Artifact - Left Image (在大屏幕上显示在右侧) -->
            <div class="artifact-container">
                <div class="artifact-image left">
                    <img id="artifactImage3" src="./FigureC.png" alt="Mug copying 'Chinese Imari', soft-paste porcelain">
                </div>

                <div class="artifact-details">
                    <h3>Mug copying 'Chinese Imari', soft-paste porcelain</h3>

                    <div class="metadata-section">
                        <h4><i class="fas fa-venus mr-2 text-porcelain-pink"></i> European_Imitation_of_Chinese_Porcelain</h4>
                        <p>This mug represents European attempts to replicate Chinese Imari ware, showcasing the influence of Chinese porcelain on European ceramic production.</p>
                    </div>

                    <div class="metadata-section">
                        <h4><i class="fas fa-tags mr-2 text-porcelain-green"></i> DescriptiveMetadata</h4>
                        <ul>
                            <li><strong>ColoredDrawing:</strong> Underglaze blue with overglaze enamels and gilding</li>
                            <li><strong>Decorations:</strong> Imitation of Chinese Imari motifs including landscapes, figures, and floral patterns</li>
                            <li><strong>Descriptions:</strong> Rounded mug with a handle, decorated in the style of Chinese Imari ware</li>
                            <li><strong>Function:</strong> Drinking vessel</li>
                            <li><strong>Glaze:</strong> Transparent glaze over underglaze and overglaze decorations</li>
                            <li><strong>ProductionPlace:</strong> England, Bow Porcelain Factory, London, c. 1752</li>
                            <li><strong>Shape:</strong> Rounded body with a short foot and C-shaped handle</li>
                        </ul>
                    </div>

                    <div class="metadata-section">
                        <h4><i class="fas fa-expand mr-2 text-porcelain-purple"></i> ExtendedMetadata</h4>
                        <ul>
                            <li><strong>Documentation:</strong> "Bow Porcelain 1744-1776" by John Ayres, page 78, cat. no. 12</li>
                            <li><strong>RelatedCollections:</strong> Similar pieces in the British Museum and the Metropolitan Museum of Art</li>
                            <li><strong>RelatedEvents:</strong> Exhibition "Porcelain Stories: From China to Europe" (2019-2020)</li>
                        </ul>
                    </div>

                    <div class="metadata-section">
                        <h4><i class="fas fa-database mr-2 text-porcelain-blue"></i> Metadata_for_Management</h4>
                        <ul>
                            <li><strong>Identifier:</strong> BM: 1910,0410.1</li>
                            <li><strong>Measurements:</strong> Height: 9.5 cm, Diameter: 8.2 cm</li>
                            <li><strong>Period:</strong> 18th century, about 1752</li>
                            <li><strong>Preservation:</strong> Good condition with some wear to gilding; Current Location: British Museum, London</li>
                            <li><strong>ProvidingInstitution:</strong> United Kingdom, British Museum</li>
                            <li><strong>Source:</strong> Acquired through the bequest of Mrs. G. M. Crawley</li>
                            <li><strong>Title:</strong> Mug copying 'Chinese Imari', soft-paste porcelain, painted in underglaze blue, enamels and gilded</li>
                        </ul>
                    </div>

                    <a href="#" class="btn">View Full Artifact Record</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-primaryBlue text-white py-4 mt-8">
        <div class="container mx-auto px-4 text-center text-sm text-lightBlue/80">
            <p>ChinaPorcelain Ontology Dashboard &copy; 2025 | Digital Humanities Research Project</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 1. 定义完整树形数据
            const treeData = {
                name: "Chinese_Porcelain_in_Europe",
                level: 1,
                children: [
                    {
                        name: "Chinese_Ladies_Porcelain_in_Europe",
                        level: 1,
                        children: []
                    },
                    {
                        name: "DescriptiveMetadata",
                        level: 1,
                        children: [
                            { name: "ColoredDrawing", level: 2, children: [] },
                            { name: "Decorations", level: 2, children: [] },
                            { name: "Descriptions", level: 2, children: [] },
                            { name: "FiringTechniques", level: 2, children: [] },
                            {
                                name: "Function", level: 2,
                                children: [
                                    { name: "FunctionCategory", level: 3, children: [] },
                                    { name: "FunctionDescription", level: 3, children: [] }
                                ]
                            },
                            { name: "Glaze", level: 2, children: [] },
                            { name: "Inscriptions", level: 2, children: [] },
                            {
                                name: "Paste", level: 2,
                                children: [
                                    { name: "PasteColor", level: 3, children: [] },
                                    { name: "PasteMaterial", level: 3, children: [] },
                                    {
                                        name: "Pastefiguring", level: 3,
                                        children: [
                                            { name: "PastefiguringDescription", level: 4, children: [] },
                                            { name: "PastefiguringTechniques", level: 4, children: [] }
                                        ]
                                    }
                                ]
                            },
                            {
                                name: "ProductionPlace", level: 2,
                                children: [
                                    { name: "ProductionKilnSites", level: 3, children: [] },
                                    { name: "ProductionPlaceDescription", level: 3, children: [] },
                                    { name: "ProductionPlaceLocation", level: 3, children: [] }
                                ]
                            },
                            {
                                name: "Shape", level: 2,
                                children: [
                                    { name: "ShapeDescription", level: 3, children: [] },
                                    { name: "ShapeImage", level: 3, children: [] }
                                ]
                            }
                        ]
                    },
                    {
                        name: "ExtendedMetadata",
                        level: 1,
                        children: [
                            { name: "Digitalization", level: 2, children: [] },
                            { name: "Domentations", level: 2, children: [] },
                            { name: "RelatedCollections", level: 2, children: [] },
                            { name: "RelatedEvents", level: 2, children: [] },
                            { name: "RelatedPeople", level: 2, children: [] }
                        ]
                    },
                    {
                        name: "Metadata_for_Management",
                        level: 1,
                        children: [
                            {
                                name: "Damage", level: 2,
                                children: [
                                    { name: "CompletenessLevel", level: 3, children: [] },
                                    {
                                        name: "DamageCause", level: 3,
                                        children: [
                                            { name: "DamageDescriptions", level: 4, children: [] }
                                        ]
                                    },
                                    { name: "DamagePosition", level: 3, children: [] }
                                ]
                            },
                            { name: "DateofStorage", level: 2, children: [] },
                            {
                                name: "Identifier", level: 2,
                                children: [
                                    { name: "Other_Identifiers", level: 3, children: [] }
                                ]
                            },
                            { name: "Level", level: 2, children: [] },
                            {
                                name: "Measurements", level: 2,
                                children: [
                                    { name: "Diameter", level: 3, children: [] },
                                    { name: "Height", level: 3, children: [] },
                                    { name: "Length", level: 3, children: [] },
                                    { name: "Mass", level: 3, children: [] },
                                    { name: "OtherMeasurements", level: 3, children: [] },
                                    { name: "Volume", level: 3, children: [] },
                                    { name: "Width", level: 3, children: [] }
                                ]
                            },
                            { name: "Period", level: 2, children: [] },
                            {
                                name: "Preservation", level: 2,
                                children: [
                                    { name: "CurrentLocation", level: 3, children: [] },
                                    { name: "Custodian", level: 3, children: [] },
                                    { name: "PreservationCondition", level: 3, children: [] },
                                    { name: "PreservationRecords", level: 3, children: [] }
                                ]
                            },
                            {
                                name: "ProvidingInstitution", level: 2,
                                children: [
                                    { name: "ProvidingInstitutionCountry", level: 3, children: [] },
                                    { name: "ProvidingInstitutionLocation", level: 3, children: [] }
                                ]
                            },
                            { name: "Quantity", level: 2, children: [] },
                            {
                                name: "Source", level: 2,
                                children: [
                                    { name: "PreviousPlace", level: 3, children: [] },
                                    { name: "SourceRecords", level: 3, children: [] },
                                    { name: "WayofAcquired", level: 3, children: [] }
                                ]
                            },
                            {
                                name: "Title", level: 2,
                                children: [
                                    { name: "Other_titles", level: 3, children: [] },
                                    { name: "Used_Titles", level: 3, children: [] }
                                ]
                            },
                            { name: "TypeofTexture", level: 2, children: [] }
                        ]
                    }
                ]
            };

            // 2. 生成类层次列表
            function generateClassHierarchy(data, container) {
                const ul = document.createElement('ul');

                function createListItem(item) {
                    const li = document.createElement('li');
                    li.setAttribute('data-name', item.name);

                    const icon = document.createElement('i');
                    icon.className = getIconForLevel(item.level);
                    li.appendChild(icon);

                    li.appendChild(document.createTextNode(item.name));

                    if (item.children && item.children.length > 0) {
                        const childUl = document.createElement('ul');
                        item.children.forEach(child => {
                            childUl.appendChild(createListItem(child));
                        });
                        li.appendChild(childUl);
                    }

                    return li;
                }

                const li = createListItem(data);
                ul.appendChild(li);
                container.appendChild(ul);
            }

            // 3. 创建知识图谱
            function createKnowledgeMap(data, maxLevel = 2, useZones = false) {
                const container = document.getElementById('knowledgeMap');

                setTimeout(() => {
                    const containerRect = container.getBoundingClientRect();
                    const width = Math.max(containerRect.width || container.clientWidth || 800, 900);
                    const height = 900;

                    container.innerHTML = '';

                    const svg = d3.select(container)
                        .append("svg")
                        .attr("width", width)
                        .attr("height", height)
                        .attr("viewBox", `0 0 ${width} ${height}`)
                        .attr("preserveAspectRatio", "xMidYMid meet")
                        .style("width", "100%")
                        .style("height", "100%")
                        .attr("id", "knowledge-map-svg");

                    const g = svg.append("g");

                    // 过滤数据只显示指定层级
                    function filterDataByLevel(node, currentLevel = 1) {
                        const filtered = {
                            name: node.name,
                            level: node.level,
                            children: []
                        };

                        if (currentLevel < maxLevel && node.children) {
                            filtered.children = node.children.map(child =>
                                filterDataByLevel(child, currentLevel + 1)
                            );
                        }

                        return filtered;
                    }

                    const filteredData = filterDataByLevel(data);
                    const root = d3.hierarchy(filteredData);
                    const nodes = root.descendants();
                    const links = root.links();

                    // 颜色方案
                    const color = d3.scaleOrdinal()
                        .domain([1, 2, 3, 4])
                        .range(["#1a3a5f", "#2a9d8f", "#e9c46a", "#e76f51"]);

                    // 标准布局
                    const simulation = d3.forceSimulation(nodes)
                        .force("link", d3.forceLink(links)
                            .id(d => d.id)
                            .distance(d => {
                                const textLength = Math.max(d.source.data.name.length, d.target.data.name.length);
                                return Math.max(150, textLength * 8 + 100);
                            })
                            .strength(0.7))
                        .force("charge", d3.forceManyBody()
                            .strength(d => {
                                const textLength = d.data.name.length;
                                return -(400 + textLength * 15);
                            }))
                        .force("center", d3.forceCenter(width / 2, height / 2))
                        .force("collide", d3.forceCollide()
                            .radius(d => {
                                const textLength = d.data.name.length;
                                return Math.max(40, textLength * 4 + 20);
                            }))
                        .force("x", d3.forceX(width / 2).strength(0.05))
                        .force("y", d3.forceY(height / 2).strength(0.05));

                    // 创建连线
                    const link = g.selectAll(".link")
                        .data(links)
                        .enter().append("line")
                        .attr("class", "link")
                        .attr("stroke", "#4A6FA5")
                        .attr("stroke-opacity", 0.6)
                        .attr("stroke-width", d => Math.max(1, 3 - d.target.depth * 0.5));

                    // 创建节点组
                    const node = g.selectAll(".node")
                        .data(nodes)
                        .enter().append("g")
                        .call(d3.drag()
                            .on("start", dragstarted)
                            .on("drag", dragged)
                            .on("end", dragended));

                    // 节点圆圈
                    node.append("circle")
                        .attr("class", "node-circle")
                        .attr("r", d => {
                            const baseRadius = 8;
                            const levelBonus = (4 - d.depth) * 3;
                            return Math.max(baseRadius, baseRadius + levelBonus);
                        })
                        .attr("fill", d => color(Math.min(d.depth + 1, 4)));

                    // 文本标签
                    node.append("text")
                        .attr("class", "node-label")
                        .attr("dx", 0)
                        .attr("dy", d => {
                            const radius = Math.max(8, 8 + (4 - d.depth) * 3);
                            return radius + 18;
                        })
                        .attr("font-size", d => {
                            const baseSize = 11;
                            const levelBonus = Math.max(0, (2 - d.depth) * 1);
                            return Math.max(9, baseSize + levelBonus) + "px";
                        })
                        .attr("font-weight", d => d.depth <= 1 ? "bold" : "500")
                        .text(d => d.data.name);

                    // 添加文本背景
                    node.insert("rect", "text")
                        .attr("class", "text-background")
                        .attr("fill", "rgba(255, 255, 255, 0.9)")
                        .attr("stroke", "rgba(0, 0, 0, 0.1)")
                        .attr("stroke-width", 0.5)
                        .attr("rx", 4)
                        .attr("ry", 4);

                    // 更新文本背景尺寸
                    function updateTextBackground() {
                        node.select(".text-background").each(function(d) {
                            const textElement = d3.select(this.parentNode).select("text");
                            const bbox = textElement.node().getBBox();
                            d3.select(this)
                                .attr("x", bbox.x - 6)
                                .attr("y", bbox.y - 3)
                                .attr("width", bbox.width + 12)
                                .attr("height", bbox.height + 6);
                        });
                    }

                    // 添加交互功能
                    addInteractivity(g, node, simulation);

                    function dragstarted(event, d) {
                        if (!event.active) simulation.alphaTarget(0.3).restart();
                        d.fx = d.x;
                        d.fy = d.y;
                    }

                    function dragged(event, d) {
                        d.fx = event.x;
                        d.fy = event.y;
                    }

                    function dragended(event, d) {
                        if (!event.active) simulation.alphaTarget(0);
                        d.fx = null;
                        d.fy = null;
                    }

                    simulation.on("tick", () => {
                        link
                            .attr("x1", d => d.source.x)
                            .attr("y1", d => d.source.y)
                            .attr("x2", d => d.target.x)
                            .attr("y2", d => d.target.y);

                        node.attr("transform", d => `translate(${d.x},${d.y})`);
                        updateTextBackground();
                    });

                    // 运行更多迭代以达到稳定状态
                    simulation.alpha(1).restart();
                    for (let i = 0; i < 400; ++i) simulation.tick();
                    updateTextBackground();
                }, 100);

                return { nodes: [], links: [], svg: null, g: null, initialTransform: null };
            }

            // 4. 添加交互功能
            function addInteractivity(g, node, simulation) {
                // 添加缩放功能
                const zoom = d3.zoom()
                    .scaleExtent([0.3, 3])
                    .on("zoom", (event) => {
                        g.attr("transform", event.transform);
                    });

                d3.select("#knowledge-map-svg").call(zoom);

                // 节点交互
                node.on("mouseover", (event, d) => {
                    // 高亮当前节点
                    d3.select(event.currentTarget).select("circle")
                        .transition()
                        .duration(200)
                        .attr("r", function() {
                            const currentRadius = +d3.select(this).attr("r");
                            return currentRadius * 1.3;
                        })
                        .attr("stroke-width", 3);
                })
                .on("mouseout", (event, d) => {
                    // 恢复节点大小
                    d3.select(event.currentTarget).select("circle")
                        .transition()
                        .duration(200)
                        .attr("r", function() {
                            const currentRadius = +d3.select(this).attr("r");
                            return currentRadius / 1.3;
                        })
                        .attr("stroke-width", 2);
                })
                .on("click", (event, d) => {
                    // 节点点击效果
                    highlightNodePath(d, g);

                    // 更新左侧列表选中状态
                    document.querySelectorAll('#classList li').forEach(li => {
                        li.style.backgroundColor = '';
                        if (li.getAttribute('data-name') === d.data.name) {
                            li.style.backgroundColor = '#d1e7dd';
                            li.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    });
                });

                // 双击重置视图
                d3.select("#knowledge-map-svg").on("dblclick.zoom", function() {
                    const svg = d3.select(this);
                    svg.transition()
                        .duration(750)
                        .call(zoom.transform, d3.zoomIdentity);
                });
            }

            // 5. 节点路径高亮
            function highlightNodePath(targetNode, g) {
                // 重置所有样式
                g.selectAll(".node circle").attr("opacity", 0.3);
                g.selectAll(".link").attr("opacity", 0.1);
                g.selectAll(".node text").attr("opacity", 0.3);

                // 获取路径上的所有节点
                const pathNodes = [];
                let current = targetNode;
                while (current) {
                    pathNodes.push(current);
                    current = current.parent;
                }

                // 高亮路径节点
                pathNodes.forEach(node => {
                    g.selectAll(".node")
                        .filter(d => d === node)
                        .select("circle")
                        .attr("opacity", 1)
                        .attr("stroke", "#ff6b6b")
                        .attr("stroke-width", 3);

                    g.selectAll(".node")
                        .filter(d => d === node)
                        .select("text")
                        .attr("opacity", 1)
                        .attr("font-weight", "bold");
                });

                // 高亮路径连线
                g.selectAll(".link")
                    .filter(d => pathNodes.includes(d.source) && pathNodes.includes(d.target))
                    .attr("opacity", 1)
                    .attr("stroke", "#ff6b6b")
                    .attr("stroke-width", 3);

                // 3秒后恢复
                setTimeout(() => {
                    g.selectAll(".node circle")
                        .transition()
                        .duration(500)
                        .attr("opacity", 1)
                        .attr("stroke", "#fff")
                        .attr("stroke-width", 2);

                    g.selectAll(".link")
                        .transition()
                        .duration(500)
                        .attr("opacity", 0.6)
                        .attr("stroke", "#4A6FA5")
                        .attr("stroke-width", 2);

                    g.selectAll(".node text")
                        .transition()
                        .duration(500)
                        .attr("opacity", 1)
                        .attr("font-weight", function(d) {
                            return d.depth <= 1 ? "bold" : "500";
                        });
                }, 3000);
            }

            // 6. 渲染左侧导航栏
            const classListContainer = document.getElementById('classList');
            generateClassHierarchy(treeData, classListContainer);

            // 7. 创建知识图谱和控制器
            let knowledgeMapInstance = createKnowledgeMap(treeData, 2, false);
            let currentMaxLevel = 2;
            let currentUseZones = false;

            // 8. 层级控制事件
            document.querySelectorAll('.layer-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.layer-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');

                    currentMaxLevel = parseInt(this.dataset.maxLevel);
                    currentUseZones = this.dataset.zoned === 'true';

                    knowledgeMapInstance = createKnowledgeMap(treeData, currentMaxLevel, currentUseZones);
                });
            });

            // 9. 重置视图按钮
            document.getElementById('resetView').addEventListener('click', function() {
                if (knowledgeMapInstance && knowledgeMapInstance.svg) {
                    const svg = knowledgeMapInstance.svg;
                    const g = svg.select("g");
                    const zoom = d3.zoom().scaleExtent([0.3, 3]);

                    // 重置缩放
                    svg.transition()
                        .duration(750)
                        .call(zoom.transform, d3.zoomIdentity);

                    // 重置样式
                    g.selectAll(".node circle")
                        .attr("opacity", 1)
                        .attr("stroke", "#fff")
                        .attr("stroke-width", 2);
                    g.selectAll(".link")
                        .attr("opacity", 0.6)
                        .attr("stroke", "#4A6FA5")
                        .attr("stroke-width", 2);
                    g.selectAll(".node text")
                        .attr("opacity", 1)
                        .attr("font-weight", function(d) {
                            return d.depth <= 1 ? "bold" : "500";
                        });

                    // 重置列表选择
                    document.querySelectorAll('#classList li').forEach(item => {
                        item.style.backgroundColor = '';
                    });
                }
            });

            // 10. 绑定地图事件
            function bindMapEvents() {
                document.querySelectorAll('#classList li').forEach(li => {
                    li.addEventListener('click', function() {
                        const nodeName = this.getAttribute('data-name');

                        // 更新列表样式
                        document.querySelectorAll('#classList li').forEach(item => {
                            item.style.backgroundColor = '';
                        });
                        this.style.backgroundColor = '#d1e7dd';

                        // 在图中高亮对应节点
                        const svg = d3.select("#knowledge-map-svg");
                        const g = svg.select("g");

                        g.selectAll(".node").each(function(d) {
                            if (d.data.name === nodeName) {
                                highlightNodePath(d, g);
                            }
                        });
                    });
                });
            }

            setTimeout(() => {
                bindMapEvents();
            }, 300);

            // 辅助函数
            function getIconForLevel(level) {
                switch(level) {
                    case 1: return 'fas fa-globe text-porcelain-blue';
                    case 2: return 'fas fa-shapes text-porcelain-green';
                    case 3: return 'fas fa-folder-open text-porcelain-purple';
                    case 4: return 'fas fa-file-alt text-porcelain-red';
                    default: return 'fas fa-dot-circle text-porcelain-yellow';
                }
            }
        });
    </script>
</body>
</html>